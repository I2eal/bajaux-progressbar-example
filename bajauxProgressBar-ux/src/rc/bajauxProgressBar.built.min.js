/*
 2015 Tridium, Inc. All Rights Reserved.
 @author Gareth Johnson
 2018 Tridium, Inc. All Rights Reserved.
 @author Gareth Johnson
 2018 Tridium, Inc. All Rights Reserved.
*/
define("nmodule/bajauxProgressBar/rc/livepoint/model",["baja!","baja!baja:StatusValue,baja:IEnum,control:ControlPoint","Promise","nmodule/webEditors/rc/fe/baja/util/numberUtils"],function(t,b,l,p){function m(b){b=Math.floor(Math.log(Math.abs(b))/Math.LN10);if(!isFinite(b)||1>b)b=1;return Math.pow(10,b)}return{resolveData:function(b){var a="undefined"!==typeof b.$overrideVal?b.$overrideVal:b.value(),f=b.properties(),d=f.getValue("min",-1),c=f.getValue("max",-1),e=t.getUnitConversion(),q=t.Unit.DEFAULT,
h=2,n,B,k,C,A,y,u,x,v,r,s,w,z="",E="",D=[];void 0!==a&&null!==a&&(D.push(t.Format.format({pattern:b.properties().getValue("title",""),object:a}).then(function(a){z=a})),D.push(t.Format.format({pattern:b.properties().getValue("valueText",""),object:a}).then(function(a){E=a})));return l.all(D).then(function(){if(a&&(a.getType().isComponent()&&a.has("out")&&(a=a.get("out")),a&&a.getType().is("baja:StatusValue"))){r=a.get("status");if(B=a.getParent())B.getType().is("control:ControlPoint")?k=B.get("facets"):
(n=a.getPropertyInParent())&&(k=B.getFacets(n)),k&&(d=-1===d?k.get("min",0):d,c=-1===c?k.get("max",100):c);a=a.get("value")}k&&(q=k.get("units",t.Unit.DEFAULT),h=k.get("precision",2));if("boolean"===typeof a)y=[k?k.get("falseText",(!1).toString()):(!1).toString(),k?k.get("trueText",(!0).toString()):(!0).toString()],d=0,c=1,C=2,a=a?1:0;else if(a&&a.getType().is("baja:IEnum")){u=a.getRange();A=u.getOrdinals();a=a.getOrdinal();y=[];for(s=0;s<A.length;++s)x=u.get(A[s]),y.push("function"===typeof x.getDisplayTag?
x.getDisplayTag():x.getTag()),A[s]===a&&(a=s);d=0;c=A.length-1;C=A.length}else{d=isFinite(d)?d:-1;c=isFinite(c)?c:-1;if(-1===d){if(d="number"===typeof b.$lastMin?b.$lastMin:0,w=m(a),d>a&&(d=0),"number"===typeof a){if(0===a)d=0;else for(;d>=a;)d-=w,d=Math.round(d*w)/w;b.$lastMin=d}}else"number"===typeof a&&a<d&&(a=d);if(-1===c){if(c="number"===typeof b.$lastMax?b.$lastMax:0,"number"===typeof a){w=m(a);for(c<a&&(c=0);c<=a;)c+=w,c=Math.round(c*w)/w;b.$lastMax=c}}else"number"===typeof a&&a>c&&(a=c)}r&&
(r.isDisabled()?v="#d6cbae":r.isFault()?v="#fb7734":r.isDown()?v="#fac600":r.isAlarm()?v="#ce1624":r.isStale()?v="#a59d86":r.isOverridden()&&(v="#bfaddc"),r.isNull()&&(a=null));return l.join(-1===d?0:p.convertUnitTo(d,q,e),-1===c?100:p.convertUnitTo(c,q,e),"number"===typeof a?p.convertUnitTo(a,q,e):null).spread(function(a,c,d){b.$lastDisplayMin=a;b.$lastDisplayMax=c;return{displayTags:y,min:a,max:c,ticks:C||f.getValue("ticks",5),value:d,title:z,valueText:E,color:v,units:q,precision:h}})})}}});
define("nmodule/bajauxProgressBar/rc/livepoint/LivePointWidget","bajaux/Widget bajaux/events bajaux/mixin/subscriberMixIn bajaux/dragdrop/dragDropUtils jquery baja! Promise nmodule/js/rc/switchboard/switchboard baja!baja:StatusValue,baja:IEnum,control:ControlPoint nmodule/bajauxProgressBar/rc/livepoint/model".split(" "),function(t,b,l,p,m,g,a,f,d,c){function e(a){var b=a.properties().getValue(h);if(b)return a.resolve(b).then(function(b){a.$lastMin=void 0;a.$lastMax=void 0;a.$overrideVal=b;return a.render()});
delete a.$overrideVal}function q(a,b){return p.fromClipboard(b).then(function(b){switch(b.getMimeType()){case "niagara/navnodes":b.toJson().then(function(b){b=b&&b[0];var c;if(b&&b.ord&&(c=a.properties().getValue(h),a.properties().setValue(h,b.ord),c))return g.Ord.make(c).resolve().then(function(b){if(b=b.getComponent())return a.getSubscriber().unsubscribe(b)})}).then(function(){return e(a)})}})}var h="overrideOrd";b=function(){t.apply(this,arguments);this.properties().add({name:h,value:"",hidden:!0,
readonly:!0,dashboard:!0});f(this,{render:{allow:"oneAtATime",onRepeat:"preempt"}});l(this)};b.prototype=Object.create(t.prototype);b.prototype.constructor=b;b.prototype.doRender=function(a){};b.prototype.render=function(){var b=this;return c.resolveData(b).then(function(c){var d=b.jq();c.width=d.width();c.height=d.height();return b.doRender(c)||a.resolve()})};b.prototype.doInitialize=function(a){var b=this;b.jq().on("dragover",function(a){a.preventDefault()}).on("drop",function(a){q(b,a.originalEvent.dataTransfer).catch(g.error);
a.preventDefault();a.stopPropagation()});b.getSubscriber().attach("changed",function(){b.render().catch(g.error)});return e(b)};b.prototype.doLayout=b.prototype.doChanged=function(){return this.render()};b.prototype.doLoad=function(){return this.render()};return b});
!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("nmodule/bajauxProgressBar/rc/progressbar/progressbar.min",[],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ProgressBar=t()}(function(){return function b(l,p,m){function g(d,c){if(!p[d]){if(!l[d]){var e="function"==typeof require&&require;if(!c&&e)return e(d,!0);if(a)return a(d,!0);e=Error("Cannot find module '"+
d+"'");throw e.code="MODULE_NOT_FOUND",e;}e=p[d]={exports:{}};l[d][0].call(e.exports,function(a){var b=l[d][1][a];return g(b?b:a)},e,e.exports,b,l,p,m)}return p[d].exports}for(var a="function"==typeof require&&require,f=0;f<m.length;f++)g(m[f]);return g}({1:[function(b,l,p){(function(){var b=this||Function("return this")(),g=function(){function a(){}function f(a,b){for(var c in a)Object.hasOwnProperty.call(a,c)&&b(c)}function d(a,b){return f(b,function(c){a[c]=b[c]}),a}function c(a,b){f(b,function(c){"undefined"==
typeof a[c]&&(a[c]=b[c])})}function e(a,b,c,d,e,f,h){var k,n,l;a=a<f?0:(a-f)/e;for(k in b)b.hasOwnProperty(k)&&(n=h[k],l="function"==typeof n?n:C[n],b[k]=g(c[k],d[k],l,a));return b}function g(a,b,c,d){return a+(b-a)*c(d)}function h(a,b){var c=k.prototype.filter,d=a._filterArgs;f(c,function(e){"undefined"!=typeof c[e][b]&&c[e][b].apply(a,d)})}function n(a,b,c,d,f,g,q,k,n,l,m){r=b+c+d;s=Math.min(m||v(),r);w=s>=r;z=d-(r-s);a.isPlaying()&&(w?(n(q,a._attachment,z),a.stop(!0)):(a._scheduleId=l(a._timeoutHandler,
u),h(a,"beforeTween"),s<b+c?e(1,f,g,q,1,1,k):e(s,f,g,q,d,b+c,k),h(a,"afterTween"),n(f,a._attachment,z)))}function B(a,b){var c={},d=typeof b;return"string"===d||"function"===d?f(a,function(a){c[a]=b}):f(a,function(a){c[a]||(c[a]=b[a]||y)}),c}function k(a,b){this._currentState=a||{};this._configured=!1;this._scheduleFunction=A;"undefined"!=typeof b&&this.setConfig(b)}var C,A,y="linear",u=1E3/60,x=Date.now?Date.now:function(){return+new Date},v="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:
x;A="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var r,s,w,z;return k.prototype.tween=function(a){return this._isTweening?this:(void 0===a&&this._configured||this.setConfig(a),this._timestamp=v(),this._start(this.get(),this._attachment),this.resume())},k.prototype.setConfig=function(b){b=b||{};this._configured=
!0;this._attachment=b.attachment;this._scheduleId=this._pausedAtTime=null;this._delay=b.delay||0;this._start=b.start||a;this._step=b.step||a;this._finish=b.finish||a;this._duration=b.duration||500;this._currentState=d({},b.from||this.get());this._originalState=this.get();this._targetState=d({},b.to||this.get());var e=this;this._timeoutHandler=function(){n(e,e._timestamp,e._delay,e._duration,e._currentState,e._originalState,e._targetState,e._easing,e._step,e._scheduleFunction)};var f=this._currentState,
g=this._targetState;return c(g,f),this._easing=B(f,b.easing||y),this._filterArgs=[f,this._originalState,g,this._easing],h(this,"tweenCreated"),this},k.prototype.get=function(){return d({},this._currentState)},k.prototype.set=function(a){this._currentState=a},k.prototype.pause=function(){return this._pausedAtTime=v(),this._isPaused=!0,this},k.prototype.resume=function(){return this._isPaused&&(this._timestamp+=v()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},
k.prototype.seek=function(a){a=Math.max(a,0);var b=v();return 0===this._timestamp+a?this:(this._timestamp=b-a,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,n(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,b),this.pause()),this)},k.prototype.stop=function(c){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=a,(b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.oCancelAnimationFrame||
b.msCancelAnimationFrame||b.mozCancelRequestAnimationFrame||b.clearTimeout)(this._scheduleId),c&&(h(this,"beforeTween"),e(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),h(this,"afterTween"),h(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},k.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},k.prototype.setScheduleFunction=function(a){this._scheduleFunction=a},k.prototype.dispose=function(){for(var a in this)this.hasOwnProperty(a)&&
delete this[a]},k.prototype.filter={},k.prototype.formula={linear:function(a){return a}},C=k.prototype.formula,d(k,{now:v,each:f,tweenProps:e,tweenProp:g,applyFilter:h,shallowCopy:d,defaults:c,composeEasingObject:B}),"function"==typeof SHIFTY_DEBUG_NOW&&(b.timeoutHandler=n),"object"==typeof p?l.exports=k:"undefined"==typeof b.Tweenable&&(b.Tweenable=k),k}();!function(){g.shallowCopy(g.prototype.formula,{easeInQuad:function(a){return Math.pow(a,2)},easeOutQuad:function(a){return-(Math.pow(a-1,2)-1)},
easeInOutQuad:function(a){return 1>(a/=0.5)?0.5*Math.pow(a,2):-0.5*((a-=2)*a-2)},easeInCubic:function(a){return Math.pow(a,3)},easeOutCubic:function(a){return Math.pow(a-1,3)+1},easeInOutCubic:function(a){return 1>(a/=0.5)?0.5*Math.pow(a,3):0.5*(Math.pow(a-2,3)+2)},easeInQuart:function(a){return Math.pow(a,4)},easeOutQuart:function(a){return-(Math.pow(a-1,4)-1)},easeInOutQuart:function(a){return 1>(a/=0.5)?0.5*Math.pow(a,4):-0.5*((a-=2)*Math.pow(a,3)-2)},easeInQuint:function(a){return Math.pow(a,
5)},easeOutQuint:function(a){return Math.pow(a-1,5)+1},easeInOutQuint:function(a){return 1>(a/=0.5)?0.5*Math.pow(a,5):0.5*(Math.pow(a-2,5)+2)},easeInSine:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return 0===a?0:Math.pow(2,10*(a-1))},easeOutExpo:function(a){return 1===a?1:-Math.pow(2,-10*a)+1},easeInOutExpo:function(a){return 0===a?0:1===a?1:1>(a/=0.5)?0.5*
Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return-(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-Math.pow(a-1,2))},easeInOutCirc:function(a){return 1>(a/=0.5)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)},easeOutBounce:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},easeInBack:function(a){return a*a*(2.70158*a-1.70158)},easeOutBack:function(a){return(a-=
1)*a*(2.70158*a+1.70158)+1},easeInOutBack:function(a){var b=1.70158;return 1>(a/=0.5)?0.5*a*a*(((b*=1.525)+1)*a-b):0.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},elastic:function(a){return-1*Math.pow(4,-8*a)*Math.sin((6*a-1)*2*Math.PI/2)+1},swingFromTo:function(a){var b=1.70158;return 1>(a/=0.5)?0.5*a*a*(((b*=1.525)+1)*a-b):0.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},swingFrom:function(a){return a*a*(2.70158*a-1.70158)},swingTo:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},bounce:function(a){return a<1/2.75?
7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bouncePast:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?2-(7.5625*(a-=1.5/2.75)*a+0.75):a<2.5/2.75?2-(7.5625*(a-=2.25/2.75)*a+0.9375):2-(7.5625*(a-=2.625/2.75)*a+0.984375)},easeFromTo:function(a){return 1>(a/=0.5)?0.5*Math.pow(a,4):-0.5*((a-=2)*Math.pow(a,3)-2)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,0.25)}})}();(function(){function a(a,
b,e,f,h,g){function l(a,b){var c,d,e,f,h;e=a;for(h=0;8>h;h++){if(f=((k*e+m)*e+p)*e-a,(0<=f?f:0-f)<b)return e;if(d=(3*k*e+2*m)*e+p,1E-6>(0<=d?d:0-d))break;e-=f/d}if(c=0,d=1,e=a,e<c)return c;if(e>d)return d;for(;c<d&&!(f=((k*e+m)*e+p)*e,(0<=f-a?f-a:0-(f-a))<b);)a>f?c=e:d=e,e=0.5*(d-c)+c;return e}var k=0,m=0,p=0,y=0,u=0,x=0;return p=3*b,m=3*(f-b)-p,k=1-p-m,x=3*e,u=3*(h-e)-x,y=1-x-u,function(a,b){var c=l(a,b);return((y*c+u)*c+x)*c}(a,1/(200*g))}function b(d,c,e,f){return function(b){return a(b,d,c,e,
f,1)}}g.setBezierFunction=function(a,c,e,q,h){var n=b(c,e,q,h);return n.displayName=a,n.x1=c,n.y1=e,n.x2=q,n.y2=h,g.prototype.formula[a]=n};g.unsetBezierFunction=function(a){delete g.prototype.formula[a]}})();(function(){var a=new g;a._filterArgs=[];g.interpolate=function(b,d,c,e,q){var h=g.shallowCopy({},b);q=q||0;e=g.composeEasingObject(b,e||"linear");a.set({});var n=a._filterArgs;n.length=0;n[0]=h;n[1]=b;n[2]=d;n[3]=e;g.applyFilter(a,"tweenCreated");g.applyFilter(a,"beforeTween");b=g.tweenProps(c,
h,b,d,1,q,e);return g.applyFilter(a,"afterTween"),b}})();(function(a){function b(c){a.each(c,function(a){var b=c[a];"string"==typeof b&&b.match(r)&&(c[a]=e(r,b,d))})}function d(a){var b=a;a=(b=b.replace(/#/,""),3===b.length&&(b=b.split(""),b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]),w[0]=c(b.substr(0,2)),w[1]=c(b.substr(2,2)),w[2]=c(b.substr(4,2)),w);return"rgb("+a[0]+","+a[1]+","+a[2]+")"}function c(a){return parseInt(a,16)}function e(a,b,c){var e=b.match(a);a=b.replace(a,s);if(e)for(var d=e.length,f=0;f<d;f++)b=
e.shift(),a=a.replace(s,c(b));return a}function g(a){var b=a.match(u),c=b.length;a=a.match(v)[0];for(var e=0;e<c;e++)a+=parseInt(b[e],10)+",";return a.slice(0,-1)+")"}function h(b){var c={};return a.each(b,function(a){var e=b[a];if("string"==typeof e){for(var d=e.match(u),f=e.match(y),e=(f?(1===f.length||e.charAt(0).match(p))&&f.unshift(""):f=["",""],f.join(s)),f=[],h=d.length,d=0;d<h;d++)f.push("_"+a+"_"+d);c[a]={formatString:e,chunkNames:f}}}),c}function n(b,c){a.each(c,function(a){for(var e=b[a].match(u),
d=e.length,f=0;f<d;f++)b[c[a].chunkNames[f]]=+e[f];delete b[a]})}function l(b,c){a.each(c,function(a){for(var d=c[a].chunkNames,f,h={},k=d.length,n=0;n<k;n++)f=d[n],h[f]=b[f],delete b[f];d=c[a].chunkNames;z.length=0;f=d.length;for(k=0;k<f;k++)z.push(h[d[k]]);h=z;d=c[a].formatString;f=h.length;for(k=0;k<f;k++)d=d.replace(s,+h[k].toFixed(4));b[a]=e(x,d,g)})}function k(b,c){a.each(c,function(a){var e,d=c[a].chunkNames,f=d.length,h=b[a];if("string"==typeof h){var h=h.split(" "),g=h[h.length-1];for(e=
0;e<f;e++)b[d[e]]=h[e]||g}else for(e=0;e<f;e++)b[d[e]]=h;delete b[a]})}function m(b,c){a.each(c,function(a){var e=c[a].chunkNames,d=e.length,f=b[e[0]];if("string"===typeof f){for(var f="",h=0;h<d;h++)f+=" "+b[e[h]],delete b[e[h]];b[a]=f.substr(1)}else b[a]=f})}var p=/(\d|\-|\.)/,y=/([^\-0-9\.]+)/g,u=/[0-9.\-]+/g,x=RegExp("rgb\\("+u.source+/,\s*/.source+u.source+/,\s*/.source+u.source+"\\)","g"),v=/^.*\(/,r=/#([0-9]|[a-f]){3,6}/gi,s="VAL",w=[],z=[];a.prototype.filter.token={tweenCreated:function(a,
c,e,d){b(a);b(c);b(e);this._tokenData=h(a)},beforeTween:function(a,b,c,e){k(e,this._tokenData);n(a,this._tokenData);n(b,this._tokenData);n(c,this._tokenData)},afterTween:function(a,b,c,e){l(a,this._tokenData);l(b,this._tokenData);l(c,this._tokenData);m(e,this._tokenData)}}})(g)}).call(null)},{}],2:[function(b,l,p){var m=b("./shape"),g=b("./utils");b=function(a,b){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}";this.containerAspectRatio=
1;m.apply(this,arguments)};b.prototype=new m;b.prototype.constructor=b;b.prototype._pathString=function(a){var b=a.strokeWidth;a.trailWidth&&a.trailWidth>a.strokeWidth&&(b=a.trailWidth);a=50-b/2;return g.render(this._pathTemplate,{radius:a,"2radius":2*a})};b.prototype._trailString=function(a){return this._pathString(a)};l.exports=b},{"./shape":7,"./utils":9}],3:[function(b,l,p){var m=b("./shape"),g=b("./utils");b=function(a,b){this._pathTemplate="M 0,{center} L 100,{center}";m.apply(this,arguments)};
b.prototype=new m;b.prototype.constructor=b;b.prototype._initializeSvg=function(a,b){a.setAttribute("viewBox","0 0 100 "+b.strokeWidth);a.setAttribute("preserveAspectRatio","none")};b.prototype._pathString=function(a){return g.render(this._pathTemplate,{center:a.strokeWidth/2})};b.prototype._trailString=function(a){return this._pathString(a)};l.exports=b},{"./shape":7,"./utils":9}],4:[function(b,l,p){l.exports={Line:b("./line"),Circle:b("./circle"),SemiCircle:b("./semicircle"),Square:b("./square"),
Path:b("./path"),Shape:b("./shape"),utils:b("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./square":8,"./utils":9}],5:[function(b,l,p){var m=b("shifty"),g=b("./utils"),a={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"};b=function d(a,b){if(!(this instanceof d))throw Error("Constructor was called without new keyword");b=g.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},b);this.path=g.isString(a)?document.querySelector(a):
a;this._opts=b;this._tweenable=null;var q=this.path.getTotalLength();this.path.style.strokeDasharray=q+" "+q;this.set(0)};b.prototype.value=function(){var a=this._getComputedDashOffset(),b=this.path.getTotalLength();return parseFloat((1-a/b).toFixed(6),10)};b.prototype.set=function(a){this.stop();this.path.style.strokeDashoffset=this._progressToOffset(a);var b=this._opts.step;if(g.isFunction(b)){var e=this._easing(this._opts.easing);a=this._calculateTo(a,e);b(a,this._opts.shape||this,this._opts.attachment)}};
b.prototype.stop=function(){this._stopTween();this.path.style.strokeDashoffset=this._getComputedDashOffset()};b.prototype.animate=function(a,b,e){b=b||{};g.isFunction(b)&&(e=b,b={});var q=g.extend({},b),h=g.extend({},this._opts);b=g.extend(h,b);h=this._easing(b.easing);q=this._resolveFromAndTo(a,h,q);this.stop();this.path.getBoundingClientRect();var n=this._getComputedDashOffset();a=this._progressToOffset(a);var l=this;this._tweenable=new m;this._tweenable.tween({from:g.extend({offset:n},q.from),
to:g.extend({offset:a},q.to),duration:b.duration,easing:h,step:function(a){l.path.style.strokeDashoffset=a.offset;b.step(a,b.shape||l,b.attachment)},finish:function(a){g.isFunction(e)&&e()}})};b.prototype._getComputedDashOffset=function(){var a=window.getComputedStyle(this.path,null);return parseFloat(a.getPropertyValue("stroke-dashoffset"),10)};b.prototype._progressToOffset=function(a){var b=this.path.getTotalLength();return b-a*b};b.prototype._resolveFromAndTo=function(a,b,e){return e.from&&e.to?
{from:e.from,to:e.to}:{from:this._calculateFrom(b),to:this._calculateTo(a,b)}};b.prototype._calculateFrom=function(a){return m.interpolate(this._opts.from,this._opts.to,this.value(),a)};b.prototype._calculateTo=function(a,b){return m.interpolate(this._opts.from,this._opts.to,a,b)};b.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)};b.prototype._easing=function(b){return a.hasOwnProperty(b)?a[b]:b};l.exports=b},{"./utils":9,shifty:1}],6:[function(b,
l,p){var m=b("./shape");p=b("./circle");var g=b("./utils");b=function(a,b){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0";this.containerAspectRatio=2;m.apply(this,arguments)};b.prototype=new m;b.prototype.constructor=b;b.prototype._initializeSvg=function(a,b){a.setAttribute("viewBox","0 0 100 50")};b.prototype._initializeTextContainer=function(a,b,d){a.text.style&&(d.style.top="auto",d.style.bottom="0",a.text.alignToBottom?g.setStyle(d,"transform","translate(-50%, 0)"):
g.setStyle(d,"transform","translate(-50%, 50%)"))};b.prototype._pathString=p.prototype._pathString;b.prototype._trailString=p.prototype._trailString;l.exports=b},{"./circle":2,"./shape":7,"./utils":9}],7:[function(b,l,p){var m=b("./path"),g=b("./utils");b=function f(b,c){if(!(this instanceof f))throw Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=g.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",
left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},c,!0);g.isObject(c)&&void 0!==c.svgStyle&&(this._opts.svgStyle=c.svgStyle);g.isObject(c)&&g.isObject(c.text)&&void 0!==c.text.style&&(this._opts.text.style=c.text.style);var e,q=this._createSvgView(this._opts);if(e=g.isString(b)?document.querySelector(b):b,!e)throw Error("Container does not exist: "+
b);this._container=e;this._container.appendChild(q.svg);this._opts.warnings&&this._warnContainerAspectRatio(this._container);this._opts.svgStyle&&g.setStyles(q.svg,this._opts.svgStyle);this.svg=q.svg;this.path=q.path;this.trail=q.trail;this.text=null;e=g.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new m(q.path,e);g.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};b.prototype.animate=function(b,d,c){if(null===this._progressPath)throw Error("Object is destroyed");
this._progressPath.animate(b,d,c)};b.prototype.stop=function(){if(null===this._progressPath)throw Error("Object is destroyed");void 0!==this._progressPath&&this._progressPath.stop()};b.prototype.destroy=function(){if(null===this._progressPath)throw Error("Object is destroyed");this.stop();this.svg.parentNode.removeChild(this.svg);this._progressPath=this.trail=this.path=this.svg=null;null!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)};b.prototype.set=function(b){if(null===
this._progressPath)throw Error("Object is destroyed");this._progressPath.set(b)};b.prototype.value=function(){if(null===this._progressPath)throw Error("Object is destroyed");return void 0===this._progressPath?0:this._progressPath.value()};b.prototype.setText=function(b){if(null===this._progressPath)throw Error("Object is destroyed");null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text));g.isObject(b)?(g.removeChildren(this.text),
this.text.appendChild(b)):this.text.innerHTML=b};b.prototype._createSvgView=function(b){var d=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(d,b);var c=null;(b.trailColor||b.trailWidth)&&(c=this._createTrail(b),d.appendChild(c));b=this._createPath(b);return d.appendChild(b),{svg:d,path:b,trail:c}};b.prototype._initializeSvg=function(b,d){b.setAttribute("viewBox","0 0 100 100")};b.prototype._createPath=function(b){var d=this._pathString(b);return this._createPathElement(d,
b)};b.prototype._createTrail=function(b){var d=this._trailString(b);b=g.extend({},b);return b.trailColor||(b.trailColor="#eee"),b.trailWidth||(b.trailWidth=b.strokeWidth),b.color=b.trailColor,b.strokeWidth=b.trailWidth,b.fill=null,this._createPathElement(d,b)};b.prototype._createPathElement=function(b,d){var c=document.createElementNS("http://www.w3.org/2000/svg","path");return c.setAttribute("d",b),c.setAttribute("stroke",d.color),c.setAttribute("stroke-width",d.strokeWidth),d.fill?c.setAttribute("fill",
d.fill):c.setAttribute("fill-opacity","0"),c};b.prototype._createTextContainer=function(b,d){var c=document.createElement("div");c.className=b.text.className;var e=b.text.style;return e&&(b.text.autoStyleContainer&&(d.style.position="relative"),g.setStyles(c,e),e.color||(c.style.color=b.color)),this._initializeTextContainer(b,d,c),c};b.prototype._initializeTextContainer=function(b,d,c){};b.prototype._pathString=function(b){throw Error("Override this function for each progress bar");};b.prototype._trailString=
function(b){throw Error("Override this function for each progress bar");};b.prototype._warnContainerAspectRatio=function(b){if(this.containerAspectRatio){var d=window.getComputedStyle(b,null),c=parseFloat(d.getPropertyValue("width"),10),e=parseFloat(d.getPropertyValue("height"),10);g.floatEquals(this.containerAspectRatio,c/e)||(console.warn("Incorrect aspect ratio of container","#"+b.id,"detected:",d.getPropertyValue("width")+"(width)","/",d.getPropertyValue("height")+"(height)","\x3d",c/e),console.warn("Aspect ratio of should be",
this.containerAspectRatio))}};l.exports=b},{"./path":5,"./utils":9}],8:[function(b,l,p){var m=b("./shape"),g=b("./utils");b=function(a,b){this._pathTemplate="M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}";this._trailTemplate="M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}";m.apply(this,arguments)};b.prototype=
new m;b.prototype.constructor=b;b.prototype._pathString=function(a){return g.render(this._pathTemplate,{width:100-a.strokeWidth/2,strokeWidth:a.strokeWidth,halfOfStrokeWidth:a.strokeWidth/2})};b.prototype._trailString=function(a){return g.render(this._trailTemplate,{width:100-a.strokeWidth/2,strokeWidth:a.strokeWidth,halfOfStrokeWidth:a.strokeWidth/2,startMargin:a.strokeWidth/2-a.trailWidth/2})};l.exports=b},{"./shape":7,"./utils":9}],9:[function(b,l,p){function m(a,b,c){a=a||{};b=b||{};c=c||!1;for(var d in b)if(b.hasOwnProperty(d)){var g=
a[d],k=b[d];c&&f(g)&&f(k)?a[d]=m(g,k,c):a[d]=k}return a}function g(b,d,h){b=b.style;for(var f=0;f<c.length;++f)b[c[f]+a(d)]=h;b[d]=h}function a(a){return a.charAt(0).toUpperCase()+a.slice(1)}function f(a){return"[object Array]"===Object.prototype.toString.call(a)?!1:"object"===typeof a&&!!a}function d(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}var c=["Webkit","Moz","O","ms"];l.exports={extend:m,render:function(a,b){var c=a,d;for(d in b)b.hasOwnProperty(d)&&(c=c.replace(RegExp("\\{"+d+"\\}",
"g"),b[d]));return c},setStyle:g,setStyles:function(a,b){d(b,function(b,c){null!==b&&void 0!==b&&(f(b)&&!0===b.prefix?g(a,c,b.value):a.style[c]=b)})},capitalize:a,isString:function(a){return"string"==typeof a||a instanceof String},isFunction:function(a){return"function"==typeof a},isObject:f,forEachObject:d,floatEquals:function(a,b){return 0.001>Math.abs(a-b)},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)}}},{}]},{},[4])(4)});
define("nmodule/bajauxProgressBar/rc/ProgressBarGauge","nmodule/bajauxProgressBar/rc/livepoint/LivePointWidget nmodule/bajauxProgressBar/rc/progressbar/progressbar.min baja! baja!gx:Font d3 jquery Promise nmodule/webChart/rc/model/modelUtil css!nmodule/bajauxProgressBar/rc/ProgressBarGaugeStyle".split(" "),function(t,b,l,p,m,g,a,f){var d=l.$("gx:Font");l=function(){t.apply(this,arguments);this.properties().add("valueText","%out.value%").add("min",-1).add("max",-1).add({name:"gaugeType",value:"Line",
readonly:!0}).add({name:"fill",value:"white",typeSpec:"gx:Color"}).add({name:"background",value:"white",typeSpec:"gx:Color"}).add({name:"barColor",value:"#00C0FF",typeSpec:"gx:Color"}).add({name:"trailColor",value:"#f4f4f4",typeSpec:"gx:Color"}).add({name:"textColor",value:"#3a3a3a",typeSpec:"gx:Color"}).add({name:"font",value:"null",typeSpec:"gx:Font"}).add({name:"showText",value:"true",typeSpec:"baja:Boolean",properties:{trueText:"showText",falseText:"hideText"}}).add({name:"lineWidth",value:2.1,
typeSpec:"baja:Double"})};l.prototype=Object.create(t.prototype);l.prototype.constructor=l;l.prototype.makeAnimationObject=function(){var a,b,f="Circle"===this.properties().getValue("gaugeType"),h=this.properties().getValue("font");if(!h||"null"===h)h=d.encodeToString();b=0<=h.indexOf("bold")?"bold":"normal";var g=0<=h.indexOf("italic")?"italic":"normal",l=0<=h.indexOf("underline")?"underline":"none",h=h.replace(/bold/g,""),h=h.replace(/italic/g,""),h=h.replace(/underline/g,""),h=h.trim(),k=h.indexOf("pt"),
m=h.substring(0,k+2),h=h.substring(k+3),m=m.replace(/pt/g,"px");"sansserif"===h.toLowerCase()&&(h="sans-serif");b={"font-family":h,"font-size":m,"font-weight":b,"font-style":g,"text-decoration":l};this.jq().css(b);f&&(a=this.jq().width(),b=b&&b["font-size"]?b["font-size"].replace(/px/g,""):12,a=(Number(b)+a)/2);return{easing:"easeInOut",color:this.properties().getValue("barColor"),strokeWidth:this.properties().getValue("lineWidth"),trailColor:this.properties().getValue("trailColor"),trailWidth:0.5*
this.properties().getValue("lineWidth"),fill:this.properties().getValue("fill"),duration:800,text:{value:"",style:f?{color:this.properties().getValue("textColor"),width:"100%","text-align":"center",position:"relative",top:-a+"px"}:{color:this.properties().getValue("textColor"),position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}}},warnings:!1}};l.prototype.doRender=function(a){var b=(a.value-(a.min||0))/(a.max||100),d=this.properties().getValue("showText");
this.$bar.animate(b,this.makeAnimationObject());this.$bar.setText(d?a.valueText:"");(a=this.properties().getValue("background"))&&this.jq(".progress-bar-gauge").css({backgroundColor:a})};l.prototype.doInitialize=function(a){a.addClass("progress-bar-gauge-outer");a.html('\x3cdiv class\x3d"progress-bar-gauge"\x3e\x3c/div\x3e');this.$bar=new (b[this.properties().getValue("gaugeType")])(a.children(".progress-bar-gauge").get(0),this.makeAnimationObject());return t.prototype.doInitialize.apply(this,arguments)};
l.prototype.doDestroy=function(){this.jq().removeClass("progress-bar-gauge-outer");this.$bar.destroy()};return l});require(["nmodule/bajauxProgressBar/rc/livepoint/LivePointWidget","nmodule/bajauxProgressBar/rc/livepoint/model","nmodule/bajauxProgressBar/rc/ProgressBarGauge"],function(){});define("nmodule/bajauxProgressBar/rc/bajauxProgressBar.run",function(){});